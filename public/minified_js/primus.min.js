
(function UMDish(name,context,definition,plugins){context[name]=definition.call(context);for(var i=0;i<plugins.length;i++){plugins[i](context[name])}
if(typeof module!=="undefined"&&module.exports){module.exports=context[name];}else if(typeof define==="function"&&define.amd){define(function reference(){return context[name];});}})("Primus",this||{},function wrapper(){var define,module,exports,Primus=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){'use strict';module.exports=function demolish(keys,options){var split=/[, ]+/;options=options||{};keys=keys||[];if('string'===typeof keys)keys=keys.split(split);function run(key,selfie){if(!options[key])return;if('string'===typeof options[key])options[key]=options[key].split(split);if('function'===typeof options[key])return options[key].call(selfie);for(var i=0,type,what;i<options[key].length;i++){what=options[key][i];type=typeof what;if('function'===type){what.call(selfie);}else if('string'===type&&'function'===typeof selfie[what]){selfie[what]();}}}
return function destroy(){var selfie=this,i=0,prop;if(selfie[keys[0]]===null)return false;run('before',selfie);for(;i<keys.length;i++){prop=keys[i];if(selfie[prop]){if('function'===typeof selfie[prop].destroy)selfie[prop].destroy();selfie[prop]=null;}}
if(selfie.emit)selfie.emit('destroy');run('after',selfie);return true;};};},{}],2:[function(_dereq_,module,exports){'use strict';module.exports=function emits(){var self=this,parser;for(var i=0,l=arguments.length,args=new Array(l);i<l;i++){args[i]=arguments[i];}
if('function'!==typeof args[args.length-1])return function emitter(){for(var i=0,l=arguments.length,arg=new Array(l);i<l;i++){arg[i]=arguments[i];}
return self.emit.apply(self,args.concat(arg));};parser=args.pop();return function emitter(){for(var i=0,l=arguments.length,arg=new Array(l+1);i<l;i++){arg[i+1]=arguments[i];}
arg[0]=function next(err,returned){if(err)return self.emit('error',err);arg=returned===undefined?arg.slice(1):returned===null?[]:returned;self.emit.apply(self,args.concat(arg));};parser.apply(self,arg);return true;};};},{}],3:[function(_dereq_,module,exports){'use strict';var has=Object.prototype.hasOwnProperty,prefix='~';function Events(){}
if(Object.create){Events.prototype=Object.create(null);if(!new Events().__proto__)prefix=false;}
function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false;}
function addListener(emitter,event,fn,context,once){if(typeof fn!=='function'){throw new TypeError('The listener must be a function');}
var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;if(!emitter._events[evt])emitter._events[evt]=listener,emitter._eventsCount++;else if(!emitter._events[evt].fn)emitter._events[evt].push(listener);else emitter._events[evt]=[emitter._events[evt],listener];return emitter;}
function clearEvent(emitter,evt){if(--emitter._eventsCount===0)emitter._events=new Events();else delete emitter._events[evt];}
function EventEmitter(){this._events=new Events();this._eventsCount=0;}
EventEmitter.prototype.eventNames=function eventNames(){var names=[],events,name;if(this._eventsCount===0)return names;for(name in(events=this._events)){if(has.call(events,name))names.push(prefix?name.slice(1):name);}
if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events));}
return names;};EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++){ee[i]=handlers[i].fn;}
return ee;};EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];if(!listeners)return 0;if(listeners.fn)return 1;return listeners.length;};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if(listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true;}
for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i];}
listeners.fn.apply(listeners.context,args);}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j];}
listeners[i].fn.apply(listeners[i].context,args);}}}
return true;};EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,false);};EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,true);};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn){clearEvent(this,evt);return this;}
var listeners=this._events[evt];if(listeners.fn){if(listeners.fn===fn&&(!once||listeners.once)&&(!context||listeners.context===context)){clearEvent(this,evt);}}else{for(var i=0,events=[],length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||(once&&!listeners[i].once)||(context&&listeners[i].context!==context)){events.push(listeners[i]);}}
if(events.length)this._events[evt]=events.length===1?events[0]:events;else clearEvent(this,evt);}
return this;};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;if(event){evt=prefix?prefix+event:event;if(this._events[evt])clearEvent(this,evt);}else{this._events=new Events();this._eventsCount=0;}
return this;};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prefixed=prefix;EventEmitter.EventEmitter=EventEmitter;if('undefined'!==typeof module){module.exports=EventEmitter;}},{}],4:[function(_dereq_,module,exports){if(typeof Object.create==='function'){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor
ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}};}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor
var TempCtor=function(){}
TempCtor.prototype=superCtor.prototype
ctor.prototype=new TempCtor()
ctor.prototype.constructor=ctor}}}},{}],5:[function(_dereq_,module,exports){'use strict';var regex=new RegExp('^((?:\\d+)?\\.?\\d+) *('+['milliseconds?','msecs?','ms','seconds?','secs?','s','minutes?','mins?','m','hours?','hrs?','h','days?','d','weeks?','wks?','w','years?','yrs?','y'].join('|')+')?$','i');var second=1000,minute=second*60,hour=minute*60,day=hour*24,week=day*7,year=day*365;module.exports=function millisecond(ms){var type=typeof ms,amount,match;if('number'===type)return ms;else if('string'!==type||'0'===ms||!ms)return 0;else if(+ms)return+ms;if(ms.length>10000||!(match=regex.exec(ms)))return 0;amount=parseFloat(match[1]);switch(match[2].toLowerCase()){case'years':case'year':case'yrs':case'yr':case'y':return amount*year;case'weeks':case'week':case'wks':case'wk':case'w':return amount*week;case'days':case'day':case'd':return amount*day;case'hours':case'hour':case'hrs':case'hr':case'h':return amount*hour;case'minutes':case'minute':case'mins':case'min':case'm':return amount*minute;case'seconds':case'second':case'secs':case'sec':case's':return amount*second;default:return amount;}};},{}],6:[function(_dereq_,module,exports){'use strict';module.exports=function one(fn){var called=0,value;function onetime(){if(called)return value;called=1;value=fn.apply(this,arguments);fn=null;return value;}
onetime.displayName=fn.displayName||fn.name||onetime.displayName||onetime.name;return onetime;};},{}],7:[function(_dereq_,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error('setTimeout has not been defined');}
function defaultClearTimeout(){throw new Error('clearTimeout has not been defined');}
(function(){try{if(typeof setTimeout==='function'){cachedSetTimeout=setTimeout;}else{cachedSetTimeout=defaultSetTimout;}}catch(e){cachedSetTimeout=defaultSetTimout;}
try{if(typeof clearTimeout==='function'){cachedClearTimeout=clearTimeout;}else{cachedClearTimeout=defaultClearTimeout;}}catch(e){cachedClearTimeout=defaultClearTimeout;}}())
function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0);}
if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0);}
try{return cachedSetTimeout(fun,0);}catch(e){try{return cachedSetTimeout.call(null,fun,0);}catch(e){return cachedSetTimeout.call(this,fun,0);}}}
function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker);}
if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker);}
try{return cachedClearTimeout(marker);}catch(e){try{return cachedClearTimeout.call(null,marker);}catch(e){return cachedClearTimeout.call(this,marker);}}}
var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return;}
draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else{queueIndex=-1;}
if(queue.length){drainQueue();}}
function drainQueue(){if(draining){return;}
var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}
queueIndex=-1;len=queue.length;}
currentQueue=null;draining=false;runClearTimeout(timeout);}
process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}
queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue);}};function Item(fun,array){this.fun=fun;this.array=array;}
Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';process.versions={};function noop(){}
process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]}
process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return'/'};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};},{}],8:[function(_dereq_,module,exports){'use strict';var has=Object.prototype.hasOwnProperty,undef;function decode(input){try{return decodeURIComponent(input.replace(/\+/g,' '));}catch(e){return null;}}
function encode(input){try{return encodeURIComponent(input);}catch(e){return null;}}
function querystring(query){var parser=/([^=?#&]+)=?([^&]*)/g,result={},part;while(part=parser.exec(query)){var key=decode(part[1]),value=decode(part[2]);if(key===null||value===null||key in result)continue;result[key]=value;}
return result;}
function querystringify(obj,prefix){prefix=prefix||'';var pairs=[],value,key;if('string'!==typeof prefix)prefix='?';for(key in obj){if(has.call(obj,key)){value=obj[key];if(!value&&(value===null||value===undef||isNaN(value))){value='';}
key=encode(key);value=encode(value);if(key===null||value===null)continue;pairs.push(key+'='+value);}}
return pairs.length?prefix+pairs.join('&'):'';}
exports.stringify=querystringify;exports.parse=querystring;},{}],9:[function(_dereq_,module,exports){'use strict';var EventEmitter=_dereq_('eventemitter3'),millisecond=_dereq_('millisecond'),destroy=_dereq_('demolish'),Tick=_dereq_('tick-tock'),one=_dereq_('one-time');function defaults(name,selfie,opts){return millisecond(name in opts?opts[name]:(name in selfie?selfie[name]:Recovery[name]));}
function Recovery(options){var recovery=this;if(!(recovery instanceof Recovery))return new Recovery(options);options=options||{};recovery.attempt=null;recovery._fn=null;recovery['reconnect timeout']=defaults('reconnect timeout',recovery,options);recovery.retries=defaults('retries',recovery,options);recovery.factor=defaults('factor',recovery,options);recovery.max=defaults('max',recovery,options);recovery.min=defaults('min',recovery,options);recovery.timers=new Tick(recovery);}
Recovery.prototype=new EventEmitter();Recovery.prototype.constructor=Recovery;Recovery['reconnect timeout']='30 seconds';Recovery.max=Infinity;Recovery.min='500 ms';Recovery.retries=10;Recovery.factor=2;Recovery.prototype.reconnect=function reconnect(){var recovery=this;return recovery.backoff(function backedoff(err,opts){opts.duration=(+new Date())-opts.start;if(err)return recovery.emit('reconnect failed',err,opts);recovery.emit('reconnected',opts);},recovery.attempt);};Recovery.prototype.backoff=function backoff(fn,opts){var recovery=this;opts=opts||recovery.attempt||{};if(opts.backoff)return recovery;opts['reconnect timeout']=defaults('reconnect timeout',recovery,opts);opts.retries=defaults('retries',recovery,opts);opts.factor=defaults('factor',recovery,opts);opts.max=defaults('max',recovery,opts);opts.min=defaults('min',recovery,opts);opts.start=+opts.start||+new Date();opts.duration=+opts.duration||0;opts.attempt=+opts.attempt||0;if(opts.attempt===opts.retries){fn.call(recovery,new Error('Unable to recover'),opts);return recovery;}
opts.backoff=true;opts.attempt++;recovery.attempt=opts;opts.scheduled=opts.attempt!==1?Math.min(Math.round((Math.random()+1)*opts.min*Math.pow(opts.factor,opts.attempt-1)),opts.max):opts.min;recovery.timers.setTimeout('reconnect',function delay(){opts.duration=(+new Date())-opts.start;opts.backoff=false;recovery.timers.clear('reconnect, timeout');var connect=recovery._fn=one(function connect(err){recovery.reset();if(err)return recovery.backoff(fn,opts);fn.call(recovery,undefined,opts);});recovery.emit('reconnect',opts,connect);recovery.timers.setTimeout('timeout',function timeout(){var err=new Error('Failed to reconnect in a timely manner');opts.duration=(+new Date())-opts.start;recovery.emit('reconnect timeout',err,opts);connect(err);},opts['reconnect timeout']);},opts.scheduled);recovery.emit('reconnect scheduled',opts);return recovery;};Recovery.prototype.reconnecting=function reconnecting(){return!!this.attempt;};Recovery.prototype.reconnected=function reconnected(err){if(this._fn)this._fn(err);return this;};Recovery.prototype.reset=function reset(){this._fn=this.attempt=null;this.timers.clear('reconnect, timeout');return this;};Recovery.prototype.destroy=destroy('timers attempt _fn');module.exports=Recovery;},{"demolish":1,"eventemitter3":10,"millisecond":5,"one-time":6,"tick-tock":12}],10:[function(_dereq_,module,exports){'use strict';var prefix=typeof Object.create!=='function'?'~':false;function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false;}
function EventEmitter(){}
EventEmitter.prototype._events=undefined;EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn;}
return ee;};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if('function'===typeof listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true;}
for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i];}
listeners.fn.apply(listeners.context,args);}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j];}
listeners[i].fn.apply(listeners[i].context,args);}}}
return true;};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener];}
return this;};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener];}
return this;};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn){if(listeners.fn){if(listeners.fn!==fn||(once&&!listeners.once)||(context&&listeners.context!==context)){events.push(listeners);}}else{for(var i=0,length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||(once&&!listeners[i].once)||(context&&listeners[i].context!==context)){events.push(listeners[i]);}}}}
if(events.length){this._events[evt]=events.length===1?events[0]:events;}else{delete this._events[evt];}
return this;};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){if(!this._events)return this;if(event)delete this._events[prefix?prefix+event:event];else this._events=prefix?{}:Object.create(null);return this;};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this;};EventEmitter.prefixed=prefix;if('undefined'!==typeof module){module.exports=EventEmitter;}},{}],11:[function(_dereq_,module,exports){'use strict';module.exports=function required(port,protocol){protocol=protocol.split(':')[0];port=+port;if(!port)return false;switch(protocol){case'http':case'ws':return port!==80;case'https':case'wss':return port!==443;case'ftp':return port!==21;case'gopher':return port!==70;case'file':return false;}
return port!==0;};},{}],12:[function(_dereq_,module,exports){(function(setImmediate,clearImmediate){(function(){'use strict';var has=Object.prototype.hasOwnProperty,ms=_dereq_('millisecond');function Timer(timer,clear,duration,fn){this.start=+(new Date());this.duration=duration;this.clear=clear;this.timer=timer;this.fns=[fn];}
Timer.prototype.remaining=function remaining(){return this.duration-this.taken();};Timer.prototype.taken=function taken(){return+(new Date())-this.start;};function unsetTimeout(id){clearTimeout(id);}
function unsetInterval(id){clearInterval(id);}
function unsetImmediate(id){clearImmediate(id);}
function Tick(context){if(!(this instanceof Tick))return new Tick(context);this.timers={};this.context=context||this;}
Tick.prototype.tock=function ticktock(name,clear){var tock=this;return function tickedtock(){if(!(name in tock.timers))return;var timer=tock.timers[name],fns=timer.fns.slice(),l=fns.length,i=0;if(clear)tock.clear(name);else tock.start=+new Date();for(;i<l;i++){fns[i].call(tock.context);}};};Tick.prototype.setTimeout=function timeout(name,fn,time){var tick=this,tock;if(tick.timers[name]){tick.timers[name].fns.push(fn);return tick;}
tock=ms(time);tick.timers[name]=new Timer(setTimeout(tick.tock(name,true),ms(time)),unsetTimeout,tock,fn);return tick;};Tick.prototype.setInterval=function interval(name,fn,time){var tick=this,tock;if(tick.timers[name]){tick.timers[name].fns.push(fn);return tick;}
tock=ms(time);tick.timers[name]=new Timer(setInterval(tick.tock(name),ms(time)),unsetInterval,tock,fn);return tick;};Tick.prototype.setImmediate=function immediate(name,fn){var tick=this;if('function'!==typeof setImmediate)return tick.setTimeout(name,fn,0);if(tick.timers[name]){tick.timers[name].fns.push(fn);return tick;}
tick.timers[name]=new Timer(setImmediate(tick.tock(name,true)),unsetImmediate,0,fn);return tick;};Tick.prototype.active=function active(name){return name in this.timers;};Tick.prototype.clear=function clear(){var args=arguments.length?arguments:[],tick=this,timer,i,l;if(args.length===1&&'string'===typeof args[0]){args=args[0].split(/[, ]+/);}
if(!args.length){for(timer in tick.timers){if(has.call(tick.timers,timer))args.push(timer);}}
for(i=0,l=args.length;i<l;i++){timer=tick.timers[args[i]];if(!timer)continue;timer.clear(timer.timer);timer.fns=timer.timer=timer.clear=null;delete tick.timers[args[i]];}
return tick;};Tick.prototype.adjust=function adjust(name,time){var interval,tick=this,tock=ms(time),timer=tick.timers[name];if(!timer)return tick;interval=timer.clear===unsetInterval;timer.clear(timer.timer);timer.start=+(new Date());timer.duration=tock;timer.timer=(interval?setInterval:setTimeout)(tick.tock(name,!interval),tock);return tick;};Tick.prototype.end=Tick.prototype.destroy=function end(){if(!this.context)return false;this.clear();this.context=this.timers=null;return true;};Tick.Timer=Timer;module.exports=Tick;}).call(this)}).call(this,_dereq_("timers").setImmediate,_dereq_("timers").clearImmediate)},{"millisecond":5,"timers":13}],13:[function(_dereq_,module,exports){(function(setImmediate,clearImmediate){(function(){var nextTick=_dereq_('process/browser.js').nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout);};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval);};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close();};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn;}
Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id);};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs;};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1;};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)
item._onTimeout();},msecs);}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args);}else{fn.call(null);}
exports.clearImmediate(id);}});return id;};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id];};}).call(this)}).call(this,_dereq_("timers").setImmediate,_dereq_("timers").clearImmediate)},{"process/browser.js":7,"timers":13}],14:[function(_dereq_,module,exports){(function(global){(function(){'use strict';var required=_dereq_('requires-port'),qs=_dereq_('querystringify'),slashes=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,protocolre=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,whitespace='[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]',left=new RegExp('^'+whitespace+'+');function trimLeft(str){return(str?str:'').toString().replace(left,'');}
var rules=[['#','hash'],['?','query'],function sanitize(address){return address.replace('\\','/');},['/','pathname'],['@','auth',1],[NaN,'host',undefined,1,1],[/:(\d+)$/,'port',undefined,1],[NaN,'hostname',undefined,1,1]];var ignore={hash:1,query:1};function lolcation(loc){var globalVar;if(typeof window!=='undefined')globalVar=window;else if(typeof global!=='undefined')globalVar=global;else if(typeof self!=='undefined')globalVar=self;else globalVar={};var location=globalVar.location||{};loc=loc||location;var finaldestination={},type=typeof loc,key;if('blob:'===loc.protocol){finaldestination=new Url(unescape(loc.pathname),{});}else if('string'===type){finaldestination=new Url(loc,{});for(key in ignore)delete finaldestination[key];}else if('object'===type){for(key in loc){if(key in ignore)continue;finaldestination[key]=loc[key];}
if(finaldestination.slashes===undefined){finaldestination.slashes=slashes.test(loc.href);}}
return finaldestination;}
function extractProtocol(address){address=trimLeft(address);var match=protocolre.exec(address),protocol=match[1]?match[1].toLowerCase():'',slashes=!!(match[2]&&match[2].length>=2),rest=match[2]&&match[2].length===1?'/'+match[3]:match[3];return{protocol:protocol,slashes:slashes,rest:rest};}
function resolve(relative,base){if(relative==='')return base;var path=(base||'/').split('/').slice(0,-1).concat(relative.split('/')),i=path.length,last=path[i-1],unshift=false,up=0;while(i--){if(path[i]==='.'){path.splice(i,1);}else if(path[i]==='..'){path.splice(i,1);up++;}else if(up){if(i===0)unshift=true;path.splice(i,1);up--;}}
if(unshift)path.unshift('');if(last==='.'||last==='..')path.push('');return path.join('/');}
function Url(address,location,parser){address=trimLeft(address);if(!(this instanceof Url)){return new Url(address,location,parser);}
var relative,extracted,parse,instruction,index,key,instructions=rules.slice(),type=typeof location,url=this,i=0;if('object'!==type&&'string'!==type){parser=location;location=null;}
if(parser&&'function'!==typeof parser)parser=qs.parse;location=lolcation(location);extracted=extractProtocol(address||'');relative=!extracted.protocol&&!extracted.slashes;url.slashes=extracted.slashes||relative&&location.slashes;url.protocol=extracted.protocol||location.protocol||'';address=extracted.rest;if(!extracted.slashes)instructions[3]=[/(.*)/,'pathname'];for(;i<instructions.length;i++){instruction=instructions[i];if(typeof instruction==='function'){address=instruction(address);continue;}
parse=instruction[0];key=instruction[1];if(parse!==parse){url[key]=address;}else if('string'===typeof parse){if(~(index=address.indexOf(parse))){if('number'===typeof instruction[2]){url[key]=address.slice(0,index);address=address.slice(index+instruction[2]);}else{url[key]=address.slice(index);address=address.slice(0,index);}}}else if((index=parse.exec(address))){url[key]=index[1];address=address.slice(0,index.index);}
url[key]=url[key]||(relative&&instruction[3]?location[key]||'':'');if(instruction[4])url[key]=url[key].toLowerCase();}
if(parser)url.query=parser(url.query);if(relative&&location.slashes&&url.pathname.charAt(0)!=='/'&&(url.pathname!==''||location.pathname!=='')){url.pathname=resolve(url.pathname,location.pathname);}
if(url.pathname.charAt(0)!=='/'&&url.hostname){url.pathname='/'+url.pathname;}
if(!required(url.port,url.protocol)){url.host=url.hostname;url.port='';}
url.username=url.password='';if(url.auth){instruction=url.auth.split(':');url.username=instruction[0]||'';url.password=instruction[1]||'';}
url.origin=url.protocol&&url.host&&url.protocol!=='file:'?url.protocol+'//'+url.host:'null';url.href=url.toString();}
function set(part,value,fn){var url=this;switch(part){case'query':if('string'===typeof value&&value.length){value=(fn||qs.parse)(value);}
url[part]=value;break;case'port':url[part]=value;if(!required(value,url.protocol)){url.host=url.hostname;url[part]='';}else if(value){url.host=url.hostname+':'+value;}
break;case'hostname':url[part]=value;if(url.port)value+=':'+url.port;url.host=value;break;case'host':url[part]=value;if(/:\d+$/.test(value)){value=value.split(':');url.port=value.pop();url.hostname=value.join(':');}else{url.hostname=value;url.port='';}
break;case'protocol':url.protocol=value.toLowerCase();url.slashes=!fn;break;case'pathname':case'hash':if(value){var char=part==='pathname'?'/':'#';url[part]=value.charAt(0)!==char?char+value:value;}else{url[part]=value;}
break;default:url[part]=value;}
for(var i=0;i<rules.length;i++){var ins=rules[i];if(ins[4])url[ins[1]]=url[ins[1]].toLowerCase();}
url.origin=url.protocol&&url.host&&url.protocol!=='file:'?url.protocol+'//'+url.host:'null';url.href=url.toString();return url;}
function toString(stringify){if(!stringify||'function'!==typeof stringify)stringify=qs.stringify;var query,url=this,protocol=url.protocol;if(protocol&&protocol.charAt(protocol.length-1)!==':')protocol+=':';var result=protocol+(url.slashes?'//':'');if(url.username){result+=url.username;if(url.password)result+=':'+url.password;result+='@';}
result+=url.host+url.pathname;query='object'===typeof url.query?stringify(url.query):url.query;if(query)result+='?'!==query.charAt(0)?'?'+query:query;if(url.hash)result+=url.hash;return result;}
Url.prototype={set:set,toString:toString};Url.extractProtocol=extractProtocol;Url.location=lolcation;Url.trimLeft=trimLeft;Url.qs=qs;module.exports=Url;}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"querystringify":8,"requires-port":11}],15:[function(_dereq_,module,exports){'use strict';var alphabet='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),length=64,map={},seed=0,i=0,prev;function encode(num){var encoded='';do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length);}while(num>0);return encoded;}
function decode(str){var decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)];}
return decoded;}
function yeast(){var now=encode(+new Date());if(now!==prev)return seed=0,prev=now;return now+'.'+encode(seed++);}
for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast;},{}],16:[function(_dereq_,module,exports){'use strict';var EventEmitter=_dereq_('eventemitter3'),TickTock=_dereq_('tick-tock'),Recovery=_dereq_('recovery'),qs=_dereq_('querystringify'),inherits=_dereq_('inherits'),destroy=_dereq_('demolish'),yeast=_dereq_('yeast'),u2028=/\u2028/g,u2029=/\u2029/g;function context(self,method){if(self instanceof Primus)return;var failure=new Error('Primus#'+method+'\'s context should called with a Primus instance');if('function'!==typeof self.listeners||!self.listeners('error').length){throw failure;}
self.emit('error',failure);}
var defaultUrl;try{if(location.origin){defaultUrl=location.origin;}else{defaultUrl=location.protocol+'//'+location.host;}}catch(e){defaultUrl='http://127.0.0.1';}
function Primus(url,options){if(!(this instanceof Primus))return new Primus(url,options);Primus.Stream.call(this);if('function'!==typeof this.client){return this.critical(new Error('The client library has not been compiled correctly, see '+'https://github.com/primus/primus#client-library for more details'));}
if('object'===typeof url){options=url;url=options.url||options.uri||defaultUrl;}else{options=options||{};}
if('ping'in options||'pong'in options){return this.critical(new Error('The `ping` and `pong` options have been removed'));}
var primus=this;options.queueSize='queueSize'in options?options.queueSize:Infinity;options.timeout='timeout'in options?options.timeout:10e3;options.reconnect='reconnect'in options?options.reconnect:{};options.pingTimeout='pingTimeout'in options?options.pingTimeout:45000;options.strategy='strategy'in options?options.strategy:[];options.transport='transport'in options?options.transport:{};primus.buffer=[];primus.writable=true;primus.readable=true;primus.url=primus.parse(url||defaultUrl);primus.readyState=Primus.CLOSED;primus.options=options;primus.timers=new TickTock(this);primus.socket=null;primus.disconnect=false;primus.transport=options.transport;primus.transformers={outgoing:[],incoming:[]};primus.recovery=new Recovery(options.reconnect);if('string'===typeof options.strategy){options.strategy=options.strategy.split(/\s?,\s?/g);}
if(false===options.strategy){options.strategy=[];}else if(!options.strategy.length){options.strategy.push('disconnect','online');if(!this.authorization)options.strategy.push('timeout');}
options.strategy=options.strategy.join(',').toLowerCase();if('websockets'in options){primus.AVOID_WEBSOCKETS=!options.websockets;}
if('network'in options){primus.NETWORK_EVENTS=options.network;}
if(!options.manual)primus.timers.setTimeout('open',function open(){primus.timers.clear('open');primus.open();},0);primus.initialise(options);}
Primus.requires=Primus.require=function requires(name){if('function'!==typeof _dereq_)return undefined;return!('function'===typeof define&&define.amd)?_dereq_(name):undefined;};try{Primus.Stream=Primus.requires('stream');}catch(e){}
if(!Primus.Stream)Primus.Stream=EventEmitter;inherits(Primus,Primus.Stream);Primus.OPENING=1;Primus.CLOSED=2;Primus.OPEN=3;Primus.prototype.AVOID_WEBSOCKETS=false;Primus.prototype.NETWORK_EVENTS=false;Primus.prototype.online=true;try{if(Primus.prototype.NETWORK_EVENTS='onLine'in navigator&&(window.addEventListener||document.body.attachEvent)){if(!navigator.onLine){Primus.prototype.online=false;}}}catch(e){}
Primus.prototype.ark={};Primus.prototype.emits=_dereq_('emits');Primus.prototype.plugin=function plugin(name){context(this,'plugin');if(name)return this.ark[name];var plugins={};for(name in this.ark){plugins[name]=this.ark[name];}
return plugins;};Primus.prototype.reserved=function reserved(evt){return(/^(incoming|outgoing)::/).test(evt)||evt in this.reserved.events;};Primus.prototype.reserved.events={'reconnect scheduled':1,'reconnect timeout':1,'readyStateChange':1,'reconnect failed':1,'reconnected':1,'reconnect':1,'offline':1,'timeout':1,'destroy':1,'online':1,'error':1,'close':1,'open':1,'data':1,'end':1};Primus.prototype.initialise=function initialise(options){var primus=this;primus.recovery.on('reconnected',primus.emits('reconnected')).on('reconnect failed',primus.emits('reconnect failed',function failed(next){primus.emit('end');next();})).on('reconnect timeout',primus.emits('reconnect timeout')).on('reconnect scheduled',primus.emits('reconnect scheduled')).on('reconnect',primus.emits('reconnect',function reconnect(next){primus.emit('outgoing::reconnect');next();}));primus.on('outgoing::open',function opening(){var readyState=primus.readyState;primus.readyState=Primus.OPENING;if(readyState!==primus.readyState){primus.emit('readyStateChange','opening');}});primus.on('incoming::open',function opened(){var readyState=primus.readyState;if(primus.recovery.reconnecting()){primus.recovery.reconnected();}
primus.writable=true;primus.readable=true;if(!primus.online){primus.online=true;primus.emit('online');}
primus.readyState=Primus.OPEN;if(readyState!==primus.readyState){primus.emit('readyStateChange','open');}
primus.heartbeat();if(primus.buffer.length){var data=primus.buffer.slice(),length=data.length,i=0;primus.buffer.length=0;for(;i<length;i++){primus._write(data[i]);}}
primus.emit('open');});primus.on('incoming::ping',function ping(time){primus.online=true;primus.heartbeat();primus.emit('outgoing::pong',time);primus._write('primus::pong::'+time);});primus.on('incoming::error',function error(e){var connect=primus.timers.active('connect'),err=e;if('string'===typeof e){err=new Error(e);}else if(!(e instanceof Error)&&'object'===typeof e){err=new Error(e.message||e.reason);for(var key in e){if(Object.prototype.hasOwnProperty.call(e,key))
err[key]=e[key];}}
if(primus.recovery.reconnecting())return primus.recovery.reconnected(err);if(primus.listeners('error').length)primus.emit('error',err);if(connect){if(~primus.options.strategy.indexOf('timeout')){primus.recovery.reconnect();}else{primus.end();}}});primus.on('incoming::data',function message(raw){primus.decoder(raw,function decoding(err,data){if(err)return primus.listeners('error').length&&primus.emit('error',err);if(primus.protocol(data))return;primus.transforms(primus,primus,'incoming',data,raw);});});primus.on('incoming::end',function end(){var readyState=primus.readyState;if(primus.disconnect){primus.disconnect=false;return primus.end();}
primus.readyState=Primus.CLOSED;if(readyState!==primus.readyState){primus.emit('readyStateChange','end');}
if(primus.timers.active('connect'))primus.end();if(readyState!==Primus.OPEN){return primus.recovery.reconnecting()?primus.recovery.reconnect():false;}
this.writable=false;this.readable=false;this.timers.clear();primus.emit('close');if(~primus.options.strategy.indexOf('disconnect')){return primus.recovery.reconnect();}
primus.emit('outgoing::end');primus.emit('end');});primus.client();for(var plugin in primus.ark){primus.ark[plugin].call(primus,primus,options);}
if(!primus.NETWORK_EVENTS)return primus;primus.offlineHandler=function offline(){if(!primus.online)return;primus.online=false;primus.emit('offline');primus.end();primus.recovery.reset();};primus.onlineHandler=function online(){if(primus.online)return;primus.online=true;primus.emit('online');if(~primus.options.strategy.indexOf('online')){primus.recovery.reconnect();}};if(window.addEventListener){window.addEventListener('offline',primus.offlineHandler,false);window.addEventListener('online',primus.onlineHandler,false);}else if(document.body.attachEvent){document.body.attachEvent('onoffline',primus.offlineHandler);document.body.attachEvent('ononline',primus.onlineHandler);}
return primus;};Primus.prototype.protocol=function protocol(msg){if('string'!==typeof msg||msg.indexOf('primus::')!==0)return false;var last=msg.indexOf(':',8),value=msg.slice(last+2);switch(msg.slice(8,last)){case'ping':this.emit('incoming::ping',+value);break;case'server':if('close'===value){this.disconnect=true;}
break;case'id':this.emit('incoming::id',value);break;default:return false;}
return true;};Primus.prototype.transforms=function transforms(primus,connection,type,data,raw){var packet={data:data},fns=primus.transformers[type];(function transform(index,done){var transformer=fns[index++];if(!transformer)return done();if(1===transformer.length){if(false===transformer.call(connection,packet)){return;}
return transform(index,done);}
transformer.call(connection,packet,function finished(err,arg){if(err)return connection.emit('error',err);if(false===arg)return;transform(index,done);});}(0,function done(){if('incoming'===type)return connection.emit('data',packet.data,raw);connection._write(packet.data);}));return this;};Primus.prototype.id=function id(fn){if(this.socket&&this.socket.id)return fn(this.socket.id);this._write('primus::id::');return this.once('incoming::id',fn);};Primus.prototype.open=function open(){context(this,'open');if(!this.recovery.reconnecting()&&this.options.timeout)this.timeout();this.emit('outgoing::open');return this;};Primus.prototype.write=function write(data){context(this,'write');this.transforms(this,this,'outgoing',data);return true;};Primus.prototype._write=function write(data){var primus=this;if(Primus.OPEN!==primus.readyState){if(this.buffer.length===this.options.queueSize){this.buffer.splice(0,1);}
this.buffer.push(data);return false;}
primus.encoder(data,function encoded(err,packet){if(err)return primus.listeners('error').length&&primus.emit('error',err);if('string'===typeof packet){if(~packet.indexOf('\u2028'))packet=packet.replace(u2028,'\\u2028');if(~packet.indexOf('\u2029'))packet=packet.replace(u2029,'\\u2029');}
primus.emit('outgoing::data',packet);});return true;};Primus.prototype.heartbeat=function heartbeat(){if(!this.options.pingTimeout)return this;this.timers.clear('heartbeat');this.timers.setTimeout('heartbeat',function expired(){if(!this.online)return;this.online=false;this.emit('offline');this.emit('incoming::end');},this.options.pingTimeout);return this;};Primus.prototype.timeout=function timeout(){var primus=this;function remove(){primus.removeListener('error',remove).removeListener('open',remove).removeListener('end',remove).timers.clear('connect');}
primus.timers.setTimeout('connect',function expired(){remove();if(primus.readyState===Primus.OPEN||primus.recovery.reconnecting()){return;}
primus.emit('timeout');if(~primus.options.strategy.indexOf('timeout')){primus.recovery.reconnect();}else{primus.end();}},primus.options.timeout);return primus.on('error',remove).on('open',remove).on('end',remove);};Primus.prototype.end=function end(data){context(this,'end');if(this.readyState===Primus.CLOSED&&!this.timers.active('connect')&&!this.timers.active('open')){if(this.recovery.reconnecting()){this.recovery.reset();this.emit('end');}
return this;}
if(data!==undefined)this.write(data);this.writable=false;this.readable=false;var readyState=this.readyState;this.readyState=Primus.CLOSED;if(readyState!==this.readyState){this.emit('readyStateChange','end');}
this.timers.clear();this.emit('outgoing::end');this.emit('close');this.emit('end');return this;};Primus.prototype.destroy=destroy('url timers options recovery socket transport transformers',{before:'end',after:['removeAllListeners',function detach(){if(!this.NETWORK_EVENTS)return;if(window.addEventListener){window.removeEventListener('offline',this.offlineHandler);window.removeEventListener('online',this.onlineHandler);}else if(document.body.attachEvent){document.body.detachEvent('onoffline',this.offlineHandler);document.body.detachEvent('ononline',this.onlineHandler);}}]});Primus.prototype.clone=function clone(obj){return this.merge({},obj);};Primus.prototype.merge=function merge(target){for(var i=1,key,obj;i<arguments.length;i++){obj=arguments[i];for(key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))
target[key]=obj[key];}}
return target;};Primus.prototype.parse=_dereq_('url-parse');Primus.prototype.querystring=qs.parse;Primus.prototype.querystringify=qs.stringify;Primus.prototype.uri=function uri(options){var url=this.url,server=[],qsa=false;if(options.query)qsa=true;options=options||{};options.protocol='protocol'in options?options.protocol:'http:';options.query=url.query&&qsa?url.query.slice(1):false;options.secure='secure'in options?options.secure:url.protocol==='https:'||url.protocol==='wss:';options.auth='auth'in options?options.auth:url.auth;options.pathname='pathname'in options?options.pathname:this.pathname;options.port='port'in options?+options.port:+url.port||(options.secure?443:80);var querystring=this.querystring(options.query||'');querystring._primuscb=yeast();options.query=this.querystringify(querystring);this.emit('outgoing::url',options);server.push(options.secure?options.protocol.replace(':','s:'):options.protocol,'');server.push(options.auth?options.auth+'@'+url.host:url.host);if(options.pathname)server.push(options.pathname.slice(1));if(qsa)server[server.length-1]+='?'+options.query;else delete options.query;if(options.object)return options;return server.join('/');};Primus.prototype.transform=function transform(type,fn){context(this,'transform');if(!(type in this.transformers)){return this.critical(new Error('Invalid transformer type'));}
this.transformers[type].push(fn);return this;};Primus.prototype.critical=function critical(err){if(this.emit('error',err))return this;throw err;};Primus.connect=function connect(url,options){return new Primus(url,options);};Primus.EventEmitter=EventEmitter;Primus.prototype.client=function client(){var primus=this,socket;var Factory=(function factory(){if('undefined'!==typeof WebSocket)return WebSocket;if('undefined'!==typeof MozWebSocket)return MozWebSocket;try{return Primus.requires('ws');}
catch(e){}
return undefined;})();if(!Factory)return primus.critical(new Error('Missing required `ws` module. Please run `npm install --save ws`'));primus.on('outgoing::open',function opening(){primus.emit('outgoing::end');try{var options={protocol:primus.url.protocol==='ws+unix:'?'ws+unix:':'ws:',query:true};if(Factory.length===3){if('ws+unix:'===options.protocol){options.pathname='/'+
primus.url.hostname+
primus.url.pathname+':'+
primus.pathname;}
primus.socket=socket=new Factory(primus.uri(options),[],primus.transport);}else{primus.socket=socket=new Factory(primus.uri(options));socket.binaryType='arraybuffer';}}catch(e){return primus.emit('error',e);}
socket.onopen=primus.emits('incoming::open');socket.onerror=primus.emits('incoming::error');socket.onclose=primus.emits('incoming::end');socket.onmessage=primus.emits('incoming::data',function parse(next,evt){next(undefined,evt.data);});});primus.on('outgoing::data',function write(message){if(!socket||socket.readyState!==Factory.OPEN)return;try{socket.send(message);}
catch(e){primus.emit('incoming::error',e);}});primus.on('outgoing::reconnect',function reconnect(){primus.emit('outgoing::open');});primus.on('outgoing::end',function close(){if(!socket)return;socket.onerror=socket.onopen=socket.onclose=socket.onmessage=function(){};socket.close();socket=null;});};Primus.prototype.authorization=false;Primus.prototype.pathname="/primus";Primus.prototype.encoder=function encoder(data,fn){var err;try{data=JSON.stringify(data);}
catch(e){err=e;}
fn(err,data);};Primus.prototype.decoder=function decoder(data,fn){var err;if('string'!==typeof data)return fn(err,data);try{data=JSON.parse(data);}
catch(e){err=e;}
fn(err,data);};Primus.prototype.version="8.0.3";if('undefined'!==typeof document&&'undefined'!==typeof navigator){if(document.addEventListener){document.addEventListener('keydown',function keydown(e){if(e.keyCode!==27||!e.preventDefault)return;e.preventDefault();},false);}
var ua=(navigator.userAgent||'').toLowerCase(),parsed=ua.match(/.+(?:rv|it|ra|ie)[/: ](\d+)\.(\d+)(?:\.(\d+))?/)||[],version=+[parsed[1],parsed[2]].join('.');if(!~ua.indexOf('chrome')&&~ua.indexOf('safari')&&version<534.54){Primus.prototype.AVOID_WEBSOCKETS=true;}}
module.exports=Primus;},{"demolish":1,"emits":2,"eventemitter3":3,"inherits":4,"querystringify":8,"recovery":9,"tick-tock":12,"url-parse":14,"yeast":15}]},{},[16])(16);return Primus;},[]);